
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Installation &#8212; RePrimAnd 0.9997 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Notation" href="notation.html" />
    <link rel="prev" title="RePrimAnd Documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<p>The main target and devolpment platform is Linux, although the
library code is not platform-specific and should also work on Macs.
Windows and AIX are not supported. For use in HPC, users need to build
the library from source. For use in postprocessing, the Python interface
can also be installed via pip (binary wheel of the library available for
Linux). There is also an experimental conda package for the C++
library (Python interface not included yet).</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>A C++11 capable compiler (tested with gcc and clang).</p></li>
<li><p>Meson build system.</p></li>
<li><p>Boost library.</p></li>
<li><p>GNU Scientific Library version &gt;= 2.0</p></li>
<li><p>HDF5 library (Only C-bindings required, not the C++ API).</p></li>
<li><p>Doxygen (only for documentation)</p></li>
<li><p>Sphinx with Breathe and bibtex extensions (only for documentation)</p></li>
<li><p>Python matplotlib (only for benchmark plots)</p></li>
</ul>
</section>
<section id="building-from-source">
<h2>Building from Source<a class="headerlink" href="#building-from-source" title="Permalink to this heading">¶</a></h2>
<p>The library is build using the modern
<a class="reference external" href="https://mesonbuild.com">Meson</a>
build system, which is
<a class="reference external" href="https://mesonbuild.com/Getting-meson.html">available</a>
as standard package in most distributions and can also be installed
via Python’s pip.</p>
<p>To build the library,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">repository</span><span class="o">&gt;</span>
<span class="n">meson</span> <span class="n">setup</span> <span class="o">--</span><span class="n">buildtype</span><span class="o">=</span><span class="n">release</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=&lt;</span><span class="n">custom</span> <span class="n">install</span> <span class="n">location</span><span class="o">&gt;</span> <span class="n">mbuild</span>
<span class="n">ninja</span> <span class="o">-</span><span class="n">C</span> <span class="n">mbuild</span>
</pre></div>
</div>
<p>This will compile with optimization and without debug symbols. Other
possibilities are <cite>–buildtype=debug</cite> and <cite>–buildtype=debugoptimized</cite>.
To use a different compiler, e.g. clang, prefix the meson command
with <cite>CC=clang CXX=clang++</cite>.
See <a class="reference external" href="https://mesonbuild.com/Running-Meson.html">here</a> for general
Meson usage.</p>
<p>Note on Conda environments: if you build for a conda environment and meson
does not detect the boost library or the wrong version, use</p>
<p>:: code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>BOOST_ROOT=$CONDA_PREFIX meson setup --prefix=$CONDA_PREFIX mbuild
</pre></div>
</div>
<p>Note on HDF5: meson and HDF5 library do not play along nicely (partly caused by bad HDF5
packaging). Make sure there is a pkg-config file for the HDF5 library you want to build
against. Another common source of problems is that you are building within a conda environment and there exists another system-wide HDF5 installation. In that case,
prefixing <cite>LD_LIBRARY_PATH</cite> with <cite>$CONDA_PREFIX/lib</cite> might help.</p>
<section id="installing">
<h3>Installing<a class="headerlink" href="#installing" title="Permalink to this heading">¶</a></h3>
<p>To install the library, use</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ninja</span> <span class="o">-</span><span class="n">C</span> <span class="n">mbuild</span> <span class="n">install</span>
</pre></div>
</div>
<p>This will install in a user-defined location if the <cite>–prefix</cite> option
was given during the build setup, otherwise systemwide (not recommended).</p>
</section>
<section id="using-the-library">
<h3>Using the Library<a class="headerlink" href="#using-the-library" title="Permalink to this heading">¶</a></h3>
<p>The various header files needed for using the library are installed
in a subdirectory <cite>reprimand</cite>. The executables have to be linked
with library <cite>RePrimAnd</cite>.</p>
<p>A minimal example can be found in <cite>example/minimal.cc</cite>. Assuming
the library is installed where the compiler (below we use gcc as
example) can find it, compilation should be straightforward:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>g++<span class="w"> </span>-lRePrimAnd<span class="w"> </span>--std<span class="o">=</span>c++11<span class="w"> </span>minimal.cc
</pre></div>
</div>
</section>
</section>
<section id="python-bindings">
<h2>Python Bindings<a class="headerlink" href="#python-bindings" title="Permalink to this heading">¶</a></h2>
<p>If only the Python interface is required on a Linux platform,
it is easiest to install from pypi</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">reprimand</span>
</pre></div>
</div>
<p>Otherwise, one first has to buid and install the C++ library as shown above.</p>
<p>To build and install the Python interface, do</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">repository</span><span class="o">&gt;</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">./</span><span class="n">bindings</span><span class="o">/</span><span class="n">python</span>
</pre></div>
</div>
<p>This will also pip install packages <cite>numpy</cite> and <cite>pybind11&gt;=2.6.0</cite>.
When using conda environment, it may be better to install those
first using conda.</p>
<p>The Python extension module is called  <cite>pyreprimand</cite>.</p>
</section>
<section id="einstein-toolkit-support">
<h2>Einstein Toolkit Support<a class="headerlink" href="#einstein-toolkit-support" title="Permalink to this heading">¶</a></h2>
<p>RePrimAnd does provide a thorn that builds the library within
an EinsteinToolkit (ET) environment, using the ExternalLibraries mechanism.
The thorn is part of the official ET framework. The version in the master
brach of this repository may however be ahead of the ET version.
It can be found in the folder <cite>ET_interface/thorns/RePrimAnd/</cite>. The thorn
depends on the HDF5, GSL, and BOOST ExternalLibraries thorns. Building it via
the ET build system does not require meson. Note this only builds the library,
but not the tests and Python bindings.</p>
<p>There are two experimental (and largely undocumented for now) thorns
that aim to simplifying the usage.
<cite>RePrimAnd_Global_EOS</cite> provides a centralized selection of a global thermal
EOS (e.g. for evolution and analysis) and a global barotropic EOS (e.g. for
initial data).
<cite>RePrimAnd_EOS_Omni_API</cite> provides the most important subset of the <cite>EOS_Omni</cite> thorn
interface, forwarding EOS calls to the reprimand EOS set by <cite>RePrimAnd_Global_EOS</cite>.
It is intended for transitioning existing code to the new interface.</p>
</section>
<section id="creating-documentation">
<h2>Creating Documentation<a class="headerlink" href="#creating-documentation" title="Permalink to this heading">¶</a></h2>
<p>Building the documentation is deactivated by default.
To build it, do</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">meson</span> <span class="n">configure</span> <span class="o">-</span><span class="n">Dbuild_documentation</span><span class="o">=</span><span class="n">true</span> <span class="n">mbuild</span>
<span class="n">ninja</span> <span class="o">-</span><span class="n">C</span> <span class="n">mbuild</span> <span class="n">documentation</span>
</pre></div>
</div>
<p>The resulting pages can be found in the build directory under
<cite>docsrc/sphinx/index.html</cite>.</p>
<p>The building of the documentation requires sphinx with the breathe
and sphinxcontrib-bibtex extensions as well as doxygen.</p>
<p>If the documentation is build, it is installed automatically when
installing the library, by default to
<cite>&lt;prefix&gt;/usr/local/share/doc/libreprimand/index.html</cite>.</p>
</section>
<section id="running-tests">
<h2>Running Tests<a class="headerlink" href="#running-tests" title="Permalink to this heading">¶</a></h2>
<section id="unit-tests">
<h3>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this heading">¶</a></h3>
<p>Building the unit tests is deactivated by default.
To build them, specify</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">meson</span> <span class="n">configure</span> <span class="o">-</span><span class="n">Dbuild_tests</span><span class="o">=</span><span class="n">true</span>
<span class="n">ninja</span> <span class="n">test</span>
</pre></div>
</div>
<p>Please report errors on the
<a class="reference external" href="https://github.com/wokast/RePrimAnd/issues">issue tracker</a>.</p>
</section>
<section id="benchmarks">
<h3>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this heading">¶</a></h3>
<p>The repository contains code to map the efficiency and accuracy of
the primitive recovery, producing the plots shown in the
article. To recreate the data and plots,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">meson</span> <span class="n">configure</span> <span class="o">-</span><span class="n">Dbuild_benchmarks</span><span class="o">=</span><span class="n">true</span>
<span class="n">ninja</span> <span class="n">benchplots</span>
<span class="n">ninja</span> <span class="n">accuracyplots</span>
</pre></div>
</div>
<p>The resulting pdf figures are placed in the build directory under
<cite>tests/benchmarks</cite>.</p>
<p>This requires Python+matplotlib.</p>
</section>
<section id="visualizing-con2prim-master-function">
<h3>Visualizing Con2Prim Master Function<a class="headerlink" href="#visualizing-con2prim-master-function" title="Permalink to this heading">¶</a></h3>
<p>In addition, there is code to sample the primitive recovery master
function (the central ingredient of the scheme) for various cases,
as shown in the paper.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">meson</span> <span class="n">configure</span> <span class="o">-</span><span class="n">Dbuild_benchmarks</span><span class="o">=</span><span class="n">true</span>
<span class="n">ninja</span> <span class="n">srootdata</span>
</pre></div>
</div>
<p>The resulting data files are placed in the build directory under
<cite>tests/sample_root/</cite>.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">RePrimAnd</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-from-source">Building from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-bindings">Python Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#einstein-toolkit-support">Einstein Toolkit Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-documentation">Creating Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-tests">Running Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="notation.html">Notation</a></li>
<li class="toctree-l1"><a class="reference internal" href="c2p_imhd.html">Primitive Recovery</a></li>
<li class="toctree-l1"><a class="reference internal" href="eos_thermal.html">Thermal EOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="eos_barotr.html">Barotropic EOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="tov_solver.html">TOV Solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="ns_seqs.html">NS Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="little_helpers.html">Little Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_interf.html">Python Bindings</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">RePrimAnd Documentation</a></li>
      <li>Next: <a href="notation.html" title="next chapter">Notation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, Wolfgang Kastaun.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/installing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>